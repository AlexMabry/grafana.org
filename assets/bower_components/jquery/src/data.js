define(["./core","./core/access","./data/var/dataPriv","./data/var/dataUser"],function(e,t,n,r){function i(t,n,i){var s;if(void 0===i&&1===t.nodeType)if(s="data-"+n.replace(a,"-$&").toLowerCase(),i=t.getAttribute(s),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:o.test(i)?e.parseJSON(i):i}catch(c){}r.set(t,n,i)}else i=void 0;return i}var o=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,a=/[A-Z]/g;return e.extend({hasData:function(e){return r.hasData(e)||n.hasData(e)},data:function(e,t,n){return r.access(e,t,n)},removeData:function(e,t){r.remove(e,t)},_data:function(e,t,r){return n.access(e,t,r)},_removeData:function(e,t){n.remove(e,t)}}),e.fn.extend({data:function(o,s){var c,u,l,d=this[0],f=d&&d.attributes;if(void 0===o){if(this.length&&(l=r.get(d),1===d.nodeType&&!n.get(d,"hasDataAttrs"))){for(c=f.length;c--;)f[c]&&(u=f[c].name,0===u.indexOf("data-")&&(u=e.camelCase(u.slice(5)),i(d,u,l[u])));n.set(d,"hasDataAttrs",!0)}return l}return"object"==typeof o?this.each(function(){r.set(this,o)}):t(this,function(t){var n,s;if(d&&void 0===t){if(n=r.get(d,o)||r.get(d,o.replace(a,"-$&").toLowerCase()),void 0!==n)return n;if(s=e.camelCase(o),n=r.get(d,s),void 0!==n)return n;if(n=i(d,s,void 0),void 0!==n)return n}else s=e.camelCase(o),this.each(function(){var e=r.get(this,s);r.set(this,s,t),o.indexOf("-")>-1&&void 0!==e&&r.set(this,o,t)})},null,s,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){r.remove(this,e)})}}),e});