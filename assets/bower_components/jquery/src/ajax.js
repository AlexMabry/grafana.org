define(["./core","./var/document","./var/rnotwhite","./ajax/var/location","./ajax/var/nonce","./ajax/var/rquery","./core/init","./ajax/parseJSON","./ajax/parseXML","./event/trigger","./deferred"],function(t,e,n,i,r,o){function s(e){return function(i,r){"string"!=typeof i&&(r=i,i="*");var o,s=0,a=i.toLowerCase().match(n)||[];if(t.isFunction(r))for(;o=a[s++];)"+"===o[0]?(o=o.slice(1)||"*",(e[o]=e[o]||[]).unshift(r)):(e[o]=e[o]||[]).push(r)}}function a(e,n,i,r){function o(l){var u;return s[l]=!0,t.each(e[l]||[],function(t,e){var l=e(n,i,r);return"string"!=typeof l||a||s[l]?a?!(u=l):void 0:(n.dataTypes.unshift(l),o(l),!1)}),u}var s={},a=e===y;return o(n.dataTypes[0])||!s["*"]&&o("*")}function l(e,n){var i,r,o=t.ajaxSettings.flatOptions||{};for(i in n)void 0!==n[i]&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&t.extend(!0,e,r),e}function u(t,e,n){for(var i,r,o,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}s||(s=r)}o=o||s}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function c(t,e,n,i){var r,o,s,a,l,u={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)u[s.toLowerCase()]=t.converters[s];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(s=u[l+" "+o]||u["* "+o],!s)for(r in u)if(a=r.split(" "),a[1]===o&&(s=u[l+" "+a[0]]||u["* "+a[0]])){s===!0?s=u[r]:u[r]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(d){return{state:"parsererror",error:s?d:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}var d=/#.*$/,f=/([?&])_=[^&]*/,h=/^(.*?):[ \t]*([^\r\n]*)$/gm,p=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,g=/^(?:GET|HEAD)$/,m=/^\/\//,v={},y={},_="*/".concat("*"),b=e.createElement("a");return b.href=i.href,t.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:i.href,type:"GET",isLocal:p.test(i.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":_,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":t.parseJSON,"text xml":t.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,n){return n?l(l(e,t.ajaxSettings),n):l(t.ajaxSettings,e)},ajaxPrefilter:s(v),ajaxTransport:s(y),ajax:function(s,l){function p(e,n,i,r){var o,s,a,l,d,f=n;2!==O&&(O=2,T&&window.clearTimeout(T),x=void 0,C=r||"",H.readyState=e>0?4:0,o=e>=200&&300>e||304===e,i&&(l=u(j,H,i)),l=c(j,l,H,o),o?(j.ifModified&&(d=H.getResponseHeader("Last-Modified"),d&&(t.lastModified[w]=d),d=H.getResponseHeader("etag"),d&&(t.etag[w]=d)),204===e||"HEAD"===j.type?f="nocontent":304===e?f="notmodified":(f=l.state,s=l.data,a=l.error,o=!a)):(a=f,(e||!f)&&(f="error",0>e&&(e=0))),H.status=e,H.statusText=(n||f)+"",o?N.resolveWith(A,[s,f,H]):N.rejectWith(A,[H,f,a]),H.statusCode(q),q=void 0,E&&D.trigger(o?"ajaxSuccess":"ajaxError",[H,j,o?s:a]),$.fireWith(A,[H,f]),E&&(D.trigger("ajaxComplete",[H,j]),--t.active||t.event.trigger("ajaxStop")))}"object"==typeof s&&(l=s,s=void 0),l=l||{};var x,w,C,k,T,S,E,F,j=t.ajaxSetup({},l),A=j.context||j,D=j.context&&(A.nodeType||A.jquery)?t(A):t.event,N=t.Deferred(),$=t.Callbacks("once memory"),q=j.statusCode||{},L={},M={},O=0,P="canceled",H={readyState:0,getResponseHeader:function(t){var e;if(2===O){if(!k)for(k={};e=h.exec(C);)k[e[1].toLowerCase()]=e[2];e=k[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===O?C:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return O||(t=M[n]=M[n]||t,L[t]=e),this},overrideMimeType:function(t){return O||(j.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>O)for(e in t)q[e]=[q[e],t[e]];else H.always(t[H.status]);return this},abort:function(t){var e=t||P;return x&&x.abort(e),p(0,e),this}};if(N.promise(H).complete=$.add,H.success=H.done,H.error=H.fail,j.url=((s||j.url||i.href)+"").replace(d,"").replace(m,i.protocol+"//"),j.type=l.method||l.type||j.method||j.type,j.dataTypes=t.trim(j.dataType||"*").toLowerCase().match(n)||[""],null==j.crossDomain){S=e.createElement("a");try{S.href=j.url,S.href=S.href,j.crossDomain=b.protocol+"//"+b.host!=S.protocol+"//"+S.host}catch(I){j.crossDomain=!0}}if(j.data&&j.processData&&"string"!=typeof j.data&&(j.data=t.param(j.data,j.traditional)),a(v,j,l,H),2===O)return H;E=t.event&&j.global,E&&0===t.active++&&t.event.trigger("ajaxStart"),j.type=j.type.toUpperCase(),j.hasContent=!g.test(j.type),w=j.url,j.hasContent||(j.data&&(w=j.url+=(o.test(w)?"&":"?")+j.data,delete j.data),j.cache===!1&&(j.url=f.test(w)?w.replace(f,"$1_="+r++):w+(o.test(w)?"&":"?")+"_="+r++)),j.ifModified&&(t.lastModified[w]&&H.setRequestHeader("If-Modified-Since",t.lastModified[w]),t.etag[w]&&H.setRequestHeader("If-None-Match",t.etag[w])),(j.data&&j.hasContent&&j.contentType!==!1||l.contentType)&&H.setRequestHeader("Content-Type",j.contentType),H.setRequestHeader("Accept",j.dataTypes[0]&&j.accepts[j.dataTypes[0]]?j.accepts[j.dataTypes[0]]+("*"!==j.dataTypes[0]?", "+_+"; q=0.01":""):j.accepts["*"]);for(F in j.headers)H.setRequestHeader(F,j.headers[F]);if(j.beforeSend&&(j.beforeSend.call(A,H,j)===!1||2===O))return H.abort();P="abort";for(F in{success:1,error:1,complete:1})H[F](j[F]);if(x=a(y,j,l,H)){if(H.readyState=1,E&&D.trigger("ajaxSend",[H,j]),2===O)return H;j.async&&j.timeout>0&&(T=window.setTimeout(function(){H.abort("timeout")},j.timeout));try{O=1,x.send(L,p)}catch(I){if(!(2>O))throw I;p(-1,I)}}else p(-1,"No Transport");return H},getJSON:function(e,n,i){return t.get(e,n,i,"json")},getScript:function(e,n){return t.get(e,void 0,n,"script")}}),t.each(["get","post"],function(e,n){t[n]=function(e,i,r,o){return t.isFunction(i)&&(o=o||r,r=i,i=void 0),t.ajax(t.extend({url:e,type:n,dataType:o,data:i,success:r},t.isPlainObject(e)&&e))}}),t});