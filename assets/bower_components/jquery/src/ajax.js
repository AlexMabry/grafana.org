define(["./core","./var/document","./var/rnotwhite","./ajax/var/location","./ajax/var/nonce","./ajax/var/rquery","./core/init","./ajax/parseJSON","./ajax/parseXML","./event/trigger","./deferred"],function(e,t,n,r,i,o){function a(t){return function(r,i){"string"!=typeof r&&(i=r,r="*");var o,a=0,s=r.toLowerCase().match(n)||[];if(e.isFunction(i))for(;o=s[a++];)"+"===o[0]?(o=o.slice(1)||"*",(t[o]=t[o]||[]).unshift(i)):(t[o]=t[o]||[]).push(i)}}function s(t,n,r,i){function o(c){var u;return a[c]=!0,e.each(t[c]||[],function(e,t){var c=t(n,r,i);return"string"!=typeof c||s||a[c]?s?!(u=c):void 0:(n.dataTypes.unshift(c),o(c),!1)}),u}var a={},s=t===v;return o(n.dataTypes[0])||!a["*"]&&o("*")}function c(t,n){var r,i,o=e.ajaxSettings.flatOptions||{};for(r in n)void 0!==n[r]&&((o[r]?t:i||(i={}))[r]=n[r]);return i&&e.extend(!0,t,i),t}function u(e,t,n){for(var r,i,o,a,s=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){c.unshift(i);break}if(c[0]in n)o=c[0];else{for(i in n){if(!c[0]||e.converters[i+" "+c[0]]){o=i;break}a||(a=i)}o=o||a}return o?(o!==c[0]&&c.unshift(o),n[o]):void 0}function l(e,t,n,r){var i,o,a,s,c,u={},l=e.dataTypes.slice();if(l[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=l.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=l.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(a=u[c+" "+o]||u["* "+o],!a)for(i in u)if(s=i.split(" "),s[1]===o&&(a=u[c+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[i]:u[i]!==!0&&(o=s[0],l.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(d){return{state:"parsererror",error:a?d:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}var d=/#.*$/,f=/([?&])_=[^&]*/,p=/^(.*?):[ \t]*([^\r\n]*)$/gm,A=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,h=/^(?:GET|HEAD)$/,m=/^\/\//,g={},v={},y="*/".concat("*"),b=t.createElement("a");return b.href=r.href,e.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:r.href,type:"GET",isLocal:A.test(r.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":y,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":e.parseJSON,"text xml":e.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,n){return n?c(c(t,e.ajaxSettings),n):c(e.ajaxSettings,t)},ajaxPrefilter:a(g),ajaxTransport:a(v),ajax:function(a,c){function A(t,n,r,i){var o,a,s,c,d,f=n;2!==I&&(I=2,T&&window.clearTimeout(T),w=void 0,E=i||"",F.readyState=t>0?4:0,o=t>=200&&300>t||304===t,r&&(c=u(M,F,r)),c=l(M,c,F,o),o?(M.ifModified&&(d=F.getResponseHeader("Last-Modified"),d&&(e.lastModified[x]=d),d=F.getResponseHeader("etag"),d&&(e.etag[x]=d)),204===t||"HEAD"===M.type?f="nocontent":304===t?f="notmodified":(f=c.state,a=c.data,s=c.error,o=!s)):(s=f,(t||!f)&&(f="error",0>t&&(t=0))),F.status=t,F.statusText=(n||f)+"",o?q.resolveWith(P,[a,f,F]):q.rejectWith(P,[F,f,s]),F.statusCode(R),R=void 0,D&&j.trigger(o?"ajaxSuccess":"ajaxError",[F,M,o?a:s]),B.fireWith(P,[F,f]),D&&(j.trigger("ajaxComplete",[F,M]),--e.active||e.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=void 0),c=c||{};var w,x,E,C,T,k,D,S,M=e.ajaxSetup({},c),P=M.context||M,j=M.context&&(P.nodeType||P.jquery)?e(P):e.event,q=e.Deferred(),B=e.Callbacks("once memory"),R=M.statusCode||{},z={},N={},I=0,O="canceled",F={readyState:0,getResponseHeader:function(e){var t;if(2===I){if(!C)for(C={};t=p.exec(E);)C[t[1].toLowerCase()]=t[2];t=C[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===I?E:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return I||(e=N[n]=N[n]||e,z[e]=t),this},overrideMimeType:function(e){return I||(M.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>I)for(t in e)R[t]=[R[t],e[t]];else F.always(e[F.status]);return this},abort:function(e){var t=e||O;return w&&w.abort(t),A(0,t),this}};if(q.promise(F).complete=B.add,F.success=F.done,F.error=F.fail,M.url=((a||M.url||r.href)+"").replace(d,"").replace(m,r.protocol+"//"),M.type=c.method||c.type||M.method||M.type,M.dataTypes=e.trim(M.dataType||"*").toLowerCase().match(n)||[""],null==M.crossDomain){k=t.createElement("a");try{k.href=M.url,k.href=k.href,M.crossDomain=b.protocol+"//"+b.host!=k.protocol+"//"+k.host}catch(Q){M.crossDomain=!0}}if(M.data&&M.processData&&"string"!=typeof M.data&&(M.data=e.param(M.data,M.traditional)),s(g,M,c,F),2===I)return F;D=e.event&&M.global,D&&0===e.active++&&e.event.trigger("ajaxStart"),M.type=M.type.toUpperCase(),M.hasContent=!h.test(M.type),x=M.url,M.hasContent||(M.data&&(x=M.url+=(o.test(x)?"&":"?")+M.data,delete M.data),M.cache===!1&&(M.url=f.test(x)?x.replace(f,"$1_="+i++):x+(o.test(x)?"&":"?")+"_="+i++)),M.ifModified&&(e.lastModified[x]&&F.setRequestHeader("If-Modified-Since",e.lastModified[x]),e.etag[x]&&F.setRequestHeader("If-None-Match",e.etag[x])),(M.data&&M.hasContent&&M.contentType!==!1||c.contentType)&&F.setRequestHeader("Content-Type",M.contentType),F.setRequestHeader("Accept",M.dataTypes[0]&&M.accepts[M.dataTypes[0]]?M.accepts[M.dataTypes[0]]+("*"!==M.dataTypes[0]?", "+y+"; q=0.01":""):M.accepts["*"]);for(S in M.headers)F.setRequestHeader(S,M.headers[S]);if(M.beforeSend&&(M.beforeSend.call(P,F,M)===!1||2===I))return F.abort();O="abort";for(S in{success:1,error:1,complete:1})F[S](M[S]);if(w=s(v,M,c,F)){if(F.readyState=1,D&&j.trigger("ajaxSend",[F,M]),2===I)return F;M.async&&M.timeout>0&&(T=window.setTimeout(function(){F.abort("timeout")},M.timeout));try{I=1,w.send(z,A)}catch(Q){if(!(2>I))throw Q;A(-1,Q)}}else A(-1,"No Transport");return F},getJSON:function(t,n,r){return e.get(t,n,r,"json")},getScript:function(t,n){return e.get(t,void 0,n,"script")}}),e.each(["get","post"],function(t,n){e[n]=function(t,r,i,o){return e.isFunction(r)&&(o=o||i,i=r,r=void 0),e.ajax(e.extend({url:t,type:n,dataType:o,data:r,success:i},e.isPlainObject(t)&&t))}}),e});