define(["./core","./var/rnotwhite","./ajax/var/nonce","./ajax/var/rquery","./core/init","./ajax/parseJSON","./ajax/parseXML","./deferred"],function(t,e,n,r){function i(n){return function(r,i){"string"!=typeof r&&(i=r,r="*");var o,a=0,s=r.toLowerCase().match(e)||[];if(t.isFunction(i))for(;o=s[a++];)"+"===o[0]?(o=o.slice(1)||"*",(n[o]=n[o]||[]).unshift(i)):(n[o]=n[o]||[]).push(i)}}function o(e,n,r,i){function o(u){var c;return a[u]=!0,t.each(e[u]||[],function(t,e){var u=e(n,r,i);return"string"!=typeof u||s||a[u]?s?!(c=u):void 0:(n.dataTypes.unshift(u),o(u),!1)}),c}var a={},s=e===v;return o(n.dataTypes[0])||!a["*"]&&o("*")}function a(e,n){var r,i,o=t.ajaxSettings.flatOptions||{};for(r in n)void 0!==n[r]&&((o[r]?e:i||(i={}))[r]=n[r]);return i&&t.extend(!0,e,i),e}function s(t,e,n){for(var r,i,o,a,s=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||t.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function u(t,e,n,r){var i,o,a,s,u,c={},l=t.dataTypes.slice();if(l[1])for(a in t.converters)c[a.toLowerCase()]=t.converters[a];for(o=l.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(a=c[u+" "+o]||c["* "+o],!a)for(i in c)if(s=i.split(" "),s[1]===o&&(a=c[u+" "+s[0]]||c["* "+s[0]])){a===!0?a=c[i]:c[i]!==!0&&(o=s[0],l.unshift(s[1]));break}if(a!==!0)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(f){return{state:"parsererror",error:a?f:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}var c=/#.*$/,l=/([?&])_=[^&]*/,f=/^(.*?):[ \t]*([^\r\n]*)$/gm,d=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,p=/^(?:GET|HEAD)$/,h=/^\/\//,m=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,g={},v={},y="*/".concat("*"),b=window.location.href,_=m.exec(b.toLowerCase())||[];return t.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:b,type:"GET",isLocal:d.test(_[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":y,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":t.parseJSON,"text xml":t.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,n){return n?a(a(e,t.ajaxSettings),n):a(t.ajaxSettings,e)},ajaxPrefilter:i(g),ajaxTransport:i(v),ajax:function(i,a){function d(e,n,r,i){var o,a,c,l,f,d=n;2!==L&&(L=2,T&&clearTimeout(T),w=void 0,C=i||"",I.readyState=e>0?4:0,o=e>=200&&300>e||304===e,r&&(l=s(j,I,r)),l=u(j,l,I,o),o?(j.ifModified&&(f=I.getResponseHeader("Last-Modified"),f&&(t.lastModified[x]=f),f=I.getResponseHeader("etag"),f&&(t.etag[x]=f)),204===e||"HEAD"===j.type?d="nocontent":304===e?d="notmodified":(d=l.state,a=l.data,c=l.error,o=!c)):(c=d,(e||!d)&&(d="error",0>e&&(e=0))),I.status=e,I.statusText=(n||d)+"",o?D.resolveWith(N,[a,d,I]):D.rejectWith(N,[I,d,c]),I.statusCode(z),z=void 0,S&&M.trigger(o?"ajaxSuccess":"ajaxError",[I,j,o?a:c]),F.fireWith(N,[I,d]),S&&(M.trigger("ajaxComplete",[I,j]),--t.active||t.event.trigger("ajaxStop")))}"object"==typeof i&&(a=i,i=void 0),a=a||{};var w,x,C,k,T,E,S,A,j=t.ajaxSetup({},a),N=j.context||j,M=j.context&&(N.nodeType||N.jquery)?t(N):t.event,D=t.Deferred(),F=t.Callbacks("once memory"),z=j.statusCode||{},q={},O={},L=0,P="canceled",I={readyState:0,getResponseHeader:function(t){var e;if(2===L){if(!k)for(k={};e=f.exec(C);)k[e[1].toLowerCase()]=e[2];e=k[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===L?C:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return L||(t=O[n]=O[n]||t,q[t]=e),this},overrideMimeType:function(t){return L||(j.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>L)for(e in t)z[e]=[z[e],t[e]];else I.always(t[I.status]);return this},abort:function(t){var e=t||P;return w&&w.abort(e),d(0,e),this}};if(D.promise(I).complete=F.add,I.success=I.done,I.error=I.fail,j.url=((i||j.url||b)+"").replace(c,"").replace(h,_[1]+"//"),j.type=a.method||a.type||j.method||j.type,j.dataTypes=t.trim(j.dataType||"*").toLowerCase().match(e)||[""],null==j.crossDomain&&(E=m.exec(j.url.toLowerCase()),j.crossDomain=!(!E||E[1]===_[1]&&E[2]===_[2]&&(E[3]||("http:"===E[1]?"80":"443"))===(_[3]||("http:"===_[1]?"80":"443")))),j.data&&j.processData&&"string"!=typeof j.data&&(j.data=t.param(j.data,j.traditional)),o(g,j,a,I),2===L)return I;S=t.event&&j.global,S&&0===t.active++&&t.event.trigger("ajaxStart"),j.type=j.type.toUpperCase(),j.hasContent=!p.test(j.type),x=j.url,j.hasContent||(j.data&&(x=j.url+=(r.test(x)?"&":"?")+j.data,delete j.data),j.cache===!1&&(j.url=l.test(x)?x.replace(l,"$1_="+n++):x+(r.test(x)?"&":"?")+"_="+n++)),j.ifModified&&(t.lastModified[x]&&I.setRequestHeader("If-Modified-Since",t.lastModified[x]),t.etag[x]&&I.setRequestHeader("If-None-Match",t.etag[x])),(j.data&&j.hasContent&&j.contentType!==!1||a.contentType)&&I.setRequestHeader("Content-Type",j.contentType),I.setRequestHeader("Accept",j.dataTypes[0]&&j.accepts[j.dataTypes[0]]?j.accepts[j.dataTypes[0]]+("*"!==j.dataTypes[0]?", "+y+"; q=0.01":""):j.accepts["*"]);for(A in j.headers)I.setRequestHeader(A,j.headers[A]);if(j.beforeSend&&(j.beforeSend.call(N,I,j)===!1||2===L))return I.abort();P="abort";for(A in{success:1,error:1,complete:1})I[A](j[A]);if(w=o(v,j,a,I)){I.readyState=1,S&&M.trigger("ajaxSend",[I,j]),j.async&&j.timeout>0&&(T=setTimeout(function(){I.abort("timeout")},j.timeout));try{L=1,w.send(q,d)}catch(R){if(!(2>L))throw R;d(-1,R)}}else d(-1,"No Transport");return I},getJSON:function(e,n,r){return t.get(e,n,r,"json")},getScript:function(e,n){return t.get(e,void 0,n,"script")}}),t.each(["get","post"],function(e,n){t[n]=function(e,r,i,o){return t.isFunction(r)&&(o=o||i,i=r,r=void 0),t.ajax({url:e,type:n,dataType:o,data:r,success:i})}}),t});