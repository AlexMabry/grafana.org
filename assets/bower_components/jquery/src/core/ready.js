define(["../core","../var/document","../core/init","../deferred"],function(t,e){function n(){e.removeEventListener("DOMContentLoaded",n),window.removeEventListener("load",n),t.ready()}var i;t.fn.ready=function(e){return t.ready.promise().done(e),this},t.extend({isReady:!1,readyWait:1,holdReady:function(e){e?t.readyWait++:t.ready(!0)},ready:function(n){(n===!0?--t.readyWait:t.isReady)||(t.isReady=!0,n!==!0&&--t.readyWait>0||(i.resolveWith(e,[t]),t.fn.triggerHandler&&(t(e).triggerHandler("ready"),t(e).off("ready"))))}}),t.ready.promise=function(r){return i||(i=t.Deferred(),"complete"===e.readyState||"loading"!==e.readyState&&!e.documentElement.doScroll?window.setTimeout(t.ready):(e.addEventListener("DOMContentLoaded",n),window.addEventListener("load",n))),i.promise(r)},t.ready.promise()});