define(["../core"],function(e){var t=function(n,r,i,o,a,s,c){var u=0,l=n.length,d=null==i;if("object"===e.type(i)){a=!0;for(u in i)t(n,r,u,i[u],!0,s,c)}else if(void 0!==o&&(a=!0,e.isFunction(o)||(c=!0),d&&(c?(r.call(n,o),r=null):(d=r,r=function(t,n,r){return d.call(e(t),r)})),r))for(;l>u;u++)r(n[u],i,c?o:o.call(n[u],u,r(n[u],i)));return a?n:d?r.call(n):l?r(n[0],i):s};return t});