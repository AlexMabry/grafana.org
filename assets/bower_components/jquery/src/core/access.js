define(["../core"],function(t){var e=function(n,i,r,o,s,a,l){var u=0,c=n.length,d=null==r;if("object"===t.type(r)){s=!0;for(u in r)e(n,i,u,r[u],!0,a,l)}else if(void 0!==o&&(s=!0,t.isFunction(o)||(l=!0),d&&(l?(i.call(n,o),i=null):(d=i,i=function(e,n,i){return d.call(t(e),i)})),i))for(;c>u;u++)i(n[u],r,l?o:o.call(n[u],u,i(n[u],r)));return s?n:d?i.call(n):c?i(n[0],r):a};return e});