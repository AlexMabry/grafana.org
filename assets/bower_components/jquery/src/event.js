define(["./core","./var/document","./var/rnotwhite","./var/slice","./data/var/dataPriv","./core/init","./selector"],function(e,t,n,r,i){function o(){return!0}function a(){return!1}function s(){try{return t.activeElement}catch(e){}}function c(t,n,r,i,o,s){var u,l;if("object"==typeof n){"string"!=typeof r&&(i=i||r,r=void 0);for(l in n)c(t,l,r,i,n[l],s);return t}if(null==i&&null==o?(o=r,i=r=void 0):null==o&&("string"==typeof r?(o=i,i=void 0):(o=i,i=r,r=void 0)),o===!1)o=a;else if(!o)return t;return 1===s&&(u=o,o=function(t){return e().off(t),u.apply(this,arguments)},o.guid=u.guid||(u.guid=e.guid++)),t.each(function(){e.event.add(this,n,o,i,r)})}var u=/^key/,l=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,d=/^([^.]*)(?:\.(.+)|)/;return e.event={global:{},add:function(t,r,o,a,s){var c,u,l,f,p,A,h,m,g,v,y,b=i.get(t);if(b)for(o.handler&&(c=o,o=c.handler,s=c.selector),o.guid||(o.guid=e.guid++),(f=b.events)||(f=b.events={}),(u=b.handle)||(u=b.handle=function(n){return"undefined"!=typeof e&&e.event.triggered!==n.type?e.event.dispatch.apply(t,arguments):void 0}),r=(r||"").match(n)||[""],p=r.length;p--;)l=d.exec(r[p])||[],g=y=l[1],v=(l[2]||"").split(".").sort(),g&&(h=e.event.special[g]||{},g=(s?h.delegateType:h.bindType)||g,h=e.event.special[g]||{},A=e.extend({type:g,origType:y,data:a,handler:o,guid:o.guid,selector:s,needsContext:s&&e.expr.match.needsContext.test(s),namespace:v.join(".")},c),(m=f[g])||(m=f[g]=[],m.delegateCount=0,h.setup&&h.setup.call(t,a,v,u)!==!1||t.addEventListener&&t.addEventListener(g,u)),h.add&&(h.add.call(t,A),A.handler.guid||(A.handler.guid=o.guid)),s?m.splice(m.delegateCount++,0,A):m.push(A),e.event.global[g]=!0)},remove:function(t,r,o,a,s){var c,u,l,f,p,A,h,m,g,v,y,b=i.hasData(t)&&i.get(t);if(b&&(f=b.events)){for(r=(r||"").match(n)||[""],p=r.length;p--;)if(l=d.exec(r[p])||[],g=y=l[1],v=(l[2]||"").split(".").sort(),g){for(h=e.event.special[g]||{},g=(a?h.delegateType:h.bindType)||g,m=f[g]||[],l=l[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=c=m.length;c--;)A=m[c],!s&&y!==A.origType||o&&o.guid!==A.guid||l&&!l.test(A.namespace)||a&&a!==A.selector&&("**"!==a||!A.selector)||(m.splice(c,1),A.selector&&m.delegateCount--,h.remove&&h.remove.call(t,A));u&&!m.length&&(h.teardown&&h.teardown.call(t,v,b.handle)!==!1||e.removeEvent(t,g,b.handle),delete f[g])}else for(g in f)e.event.remove(t,g+r[p],o,a,!0);e.isEmptyObject(f)&&i.remove(t,"handle events")}},dispatch:function(t){t=e.event.fix(t);var n,o,a,s,c,u=[],l=r.call(arguments),d=(i.get(this,"events")||{})[t.type]||[],f=e.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!f.preDispatch||f.preDispatch.call(this,t)!==!1){for(u=e.event.handlers.call(this,t,d),n=0;(s=u[n++])&&!t.isPropagationStopped();)for(t.currentTarget=s.elem,o=0;(c=s.handlers[o++])&&!t.isImmediatePropagationStopped();)(!t.rnamespace||t.rnamespace.test(c.namespace))&&(t.handleObj=c,t.data=c.data,a=((e.event.special[c.origType]||{}).handle||c.handler).apply(s.elem,l),void 0!==a&&(t.result=a)===!1&&(t.preventDefault(),t.stopPropagation()));return f.postDispatch&&f.postDispatch.call(this,t),t.result}},handlers:function(t,n){var r,i,o,a,s=[],c=n.delegateCount,u=t.target;if(c&&u.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==t.type)){for(i=[],r=0;c>r;r++)a=n[r],o=a.selector+" ",void 0===i[o]&&(i[o]=a.needsContext?e(o,this).index(u)>-1:e.find(o,this,null,[u]).length),i[o]&&i.push(a);i.length&&s.push({elem:u,handlers:i})}return c<n.length&&s.push({elem:this,handlers:n.slice(c)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,o,a=n.button;return null==e.pageX&&null!=n.clientX&&(r=e.target.ownerDocument||t,i=r.documentElement,o=r.body,e.pageX=n.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(n){if(n[e.expando])return n;var r,i,o,a=n.type,s=n,c=this.fixHooks[a];for(c||(this.fixHooks[a]=c=l.test(a)?this.mouseHooks:u.test(a)?this.keyHooks:{}),o=c.props?this.props.concat(c.props):this.props,n=new e.Event(s),r=o.length;r--;)i=o[r],n[i]=s[i];return n.target||(n.target=t),3===n.target.nodeType&&(n.target=n.target.parentNode),c.filter?c.filter(n,s):n},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==s()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===s()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&e.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return e.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},e.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},e.Event=function(t,n){return this instanceof e.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?o:a):this.type=t,n&&e.extend(this,n),this.timeStamp=t&&t.timeStamp||e.now(),void(this[e.expando]=!0)):new e.Event(t,n)},e.Event.prototype={constructor:e.Event,isDefaultPrevented:a,isPropagationStopped:a,isImmediatePropagationStopped:a,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=o,e&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=o,e&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=o,e&&e.stopImmediatePropagation(),this.stopPropagation()}},e.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,n){e.event.special[t]={delegateType:n,bindType:n,handle:function(t){var r,i=this,o=t.relatedTarget,a=t.handleObj;return(!o||o!==i&&!e.contains(i,o))&&(t.type=a.origType,r=a.handler.apply(this,arguments),t.type=n),r}}}),e.fn.extend({on:function(e,t,n,r){return c(this,e,t,n,r)},one:function(e,t,n,r){return c(this,e,t,n,r,1)},off:function(t,n,r){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,e(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(o in t)this.off(o,n,t[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=void 0),r===!1&&(r=a),this.each(function(){e.event.remove(this,t,r,n)})}}),e});