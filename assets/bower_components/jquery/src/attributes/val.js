define(["../core","./support","../core/init"],function(t,e){var n=/\r/g;t.fn.extend({val:function(e){var r,i,o,a=this[0];{if(arguments.length)return o=t.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=o?e.call(this,n,t(this).val()):e,null==i?i="":"number"==typeof i?i+="":t.isArray(i)&&(i=t.map(i,function(t){return null==t?"":t+""})),r=t.valHooks[this.type]||t.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&void 0!==r.set(this,i,"value")||(this.value=i))});if(a)return r=t.valHooks[a.type]||t.valHooks[a.nodeName.toLowerCase()],r&&"get"in r&&void 0!==(i=r.get(a,"value"))?i:(i=a.value,"string"==typeof i?i.replace(n,""):null==i?"":i)}}}),t.extend({valHooks:{option:{get:function(e){var n=t.find.attr(e,"value");return null!=n?n:t.trim(t.text(e))}},select:{get:function(n){for(var r,i,o=n.options,a=n.selectedIndex,s="select-one"===n.type||0>a,u=s?null:[],c=s?a+1:o.length,l=0>a?c:s?a:0;c>l;l++)if(i=o[l],(i.selected||l===a)&&(e.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!t.nodeName(i.parentNode,"optgroup"))){if(r=t(i).val(),s)return r;u.push(r)}return u},set:function(e,n){for(var r,i,o=e.options,a=t.makeArray(n),s=o.length;s--;)i=o[s],(i.selected=t.inArray(i.value,a)>=0)&&(r=!0);return r||(e.selectedIndex=-1),a}}}}),t.each(["radio","checkbox"],function(){t.valHooks[this]={set:function(e,n){return t.isArray(n)?e.checked=t.inArray(t(e).val(),n)>=0:void 0}},e.checkOn||(t.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})});