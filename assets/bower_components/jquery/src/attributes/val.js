define(["../core","../core/stripAndCollapse","./support","../core/init"],function(t,e,n){"use strict";var i=/\r/g;t.fn.extend({val:function(e){var n,r,o,s=this[0];{if(arguments.length)return o=t.isFunction(e),this.each(function(i){var r;1===this.nodeType&&(r=o?e.call(this,i,t(this).val()):e,null==r?r="":"number"==typeof r?r+="":t.isArray(r)&&(r=t.map(r,function(t){return null==t?"":t+""})),n=t.valHooks[this.type]||t.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&void 0!==n.set(this,r,"value")||(this.value=r))});if(s)return n=t.valHooks[s.type]||t.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&void 0!==(r=n.get(s,"value"))?r:(r=s.value,"string"==typeof r?r.replace(i,""):null==r?"":r)}}}),t.extend({valHooks:{option:{get:function(n){var i=t.find.attr(n,"value");return null!=i?i:e(t.text(n))}},select:{get:function(e){var n,i,r,o=e.options,s=e.selectedIndex,a="select-one"===e.type,l=a?null:[],c=a?s+1:o.length;for(r=0>s?c:a?s:0;c>r;r++)if(i=o[r],(i.selected||r===s)&&!i.disabled&&(!i.parentNode.disabled||!t.nodeName(i.parentNode,"optgroup"))){if(n=t(i).val(),a)return n;l.push(n)}return l},set:function(e,n){for(var i,r,o=e.options,s=t.makeArray(n),a=o.length;a--;)r=o[a],(r.selected=t.inArray(t.valHooks.option.get(r),s)>-1)&&(i=!0);return i||(e.selectedIndex=-1),s}}}}),t.each(["radio","checkbox"],function(){t.valHooks[this]={set:function(e,n){return t.isArray(n)?e.checked=t.inArray(t(e).val(),n)>-1:void 0}},n.checkOn||(t.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})});