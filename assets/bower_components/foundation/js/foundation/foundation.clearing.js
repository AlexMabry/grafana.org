!function(e,t,n,o){"use strict";Foundation.libs.clearing={name:"clearing",version:"5.4.7",settings:{templates:{viewing:'<a href="#" class="clearing-close">&times;</a><div class="visible-img" style="display: none"><div class="clearing-touch-label"></div><img src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" alt="" /><p class="clearing-caption"></p><a href="#" class="clearing-main-prev"><span></span></a><a href="#" class="clearing-main-next"><span></span></a></div>'},close_selectors:".clearing-close, div.clearing-blackout",open_selectors:"",skip_selector:"",touch_label:"",init:!1,locked:!1},init:function(e,t,n){var o=this;Foundation.inherit(this,"throttle image_loaded"),this.bindings(t,n),o.S(this.scope).is("["+this.attr_name()+"]")?this.assemble(o.S("li",this.scope)):o.S("["+this.attr_name()+"]",this.scope).each(function(){o.assemble(o.S("li",this))})},events:function(o){var i=this,r=i.S,a=e(".scroll-container");a.length>0&&(this.scope=a),r(this.scope).off(".clearing").on("click.fndtn.clearing","ul["+this.attr_name()+"] li "+this.settings.open_selectors,function(e,t,n){var t=t||r(this),n=n||t,o=t.next("li"),a=t.closest("["+i.attr_name()+"]").data(i.attr_name(!0)+"-init"),s=r(e.target);e.preventDefault(),a||(i.init(),a=t.closest("["+i.attr_name()+"]").data(i.attr_name(!0)+"-init")),n.hasClass("visible")&&t[0]===n[0]&&o.length>0&&i.is_open(t)&&(n=o,s=r("img",n)),i.open(s,t,n),i.update_paddles(n)}).on("click.fndtn.clearing",".clearing-main-next",function(e){i.nav(e,"next")}).on("click.fndtn.clearing",".clearing-main-prev",function(e){i.nav(e,"prev")}).on("click.fndtn.clearing",this.settings.close_selectors,function(e){Foundation.libs.clearing.close(e,this)}),e(n).on("keydown.fndtn.clearing",function(e){i.keydown(e)}),r(t).off(".clearing").on("resize.fndtn.clearing",function(){i.resize()}),this.swipe_events(o)},swipe_events:function(e){var t=this,n=t.S;n(this.scope).on("touchstart.fndtn.clearing",".visible-img",function(e){e.touches||(e=e.originalEvent);var t={start_page_x:e.touches[0].pageX,start_page_y:e.touches[0].pageY,start_time:(new Date).getTime(),delta_x:0,is_scrolling:o};n(this).data("swipe-transition",t),e.stopPropagation()}).on("touchmove.fndtn.clearing",".visible-img",function(e){if(e.touches||(e=e.originalEvent),!(e.touches.length>1||e.scale&&1!==e.scale)){var o=n(this).data("swipe-transition");if("undefined"==typeof o&&(o={}),o.delta_x=e.touches[0].pageX-o.start_page_x,Foundation.rtl&&(o.delta_x=-o.delta_x),"undefined"==typeof o.is_scrolling&&(o.is_scrolling=!!(o.is_scrolling||Math.abs(o.delta_x)<Math.abs(e.touches[0].pageY-o.start_page_y))),!o.is_scrolling&&!o.active){e.preventDefault();var i=o.delta_x<0?"next":"prev";o.active=!0,t.nav(e,i)}}}).on("touchend.fndtn.clearing",".visible-img",function(e){n(this).data("swipe-transition",{}),e.stopPropagation()})},assemble:function(t){var n=t.parent();if(!n.parent().hasClass("carousel")){n.after('<div id="foundationClearingHolder"></div>');var o=n.detach(),i="";if(null!=o[0]){i=o[0].outerHTML;var r=this.S("#foundationClearingHolder"),a=n.data(this.attr_name(!0)+"-init"),s={grid:'<div class="carousel">'+i+"</div>",viewing:a.templates.viewing},c='<div class="clearing-assembled"><div>'+s.viewing+s.grid+"</div></div>",u=this.settings.touch_label;Modernizr.touch&&(c=e(c).find(".clearing-touch-label").html(u).end()),r.after(c).remove()}}},open:function(t,o,i){function r(){setTimeout(function(){this.image_loaded(l,function(){1!==l.outerWidth()||b?a.call(this,l):r.call(this)}.bind(this))}.bind(this),100)}function a(t){var n=e(t);n.css("visibility","visible"),c.css("overflow","hidden"),u.addClass("clearing-blackout"),d.addClass("clearing-container"),f.show(),this.fix_height(i).caption(s.S(".clearing-caption",f),s.S("img",i)).center_and_label(t,p).shift(o,i,function(){i.closest("li").siblings().removeClass("visible"),i.closest("li").addClass("visible")}),f.trigger("opened.fndtn.clearing")}var s=this,c=e(n.body),u=i.closest(".clearing-assembled"),d=s.S("div",u).first(),f=s.S(".visible-img",d),l=s.S("img",f).not(t),p=s.S(".clearing-touch-label",d),b=!1;e("body").on("touchmove",function(e){e.preventDefault()}),l.error(function(){b=!0}),this.locked()||(f.trigger("open.fndtn.clearing"),l.attr("src",this.load(t)).css("visibility","hidden"),r.call(this))},close:function(t,o){t.preventDefault();var i,r,a=function(e){return/blackout/.test(e.selector)?e:e.closest(".clearing-blackout")}(e(o)),s=e(n.body);return o===t.target&&a&&(s.css("overflow",""),i=e("div",a).first(),r=e(".visible-img",i),r.trigger("close.fndtn.clearing"),this.settings.prev_index=0,e("ul["+this.attr_name()+"]",a).attr("style","").closest(".clearing-blackout").removeClass("clearing-blackout"),i.removeClass("clearing-container"),r.hide(),r.trigger("closed.fndtn.clearing")),e("body").off("touchmove"),!1},is_open:function(e){return e.parent().prop("style").length>0},keydown:function(t){var n=e(".clearing-blackout ul["+this.attr_name()+"]"),o=this.rtl?37:39,i=this.rtl?39:37,r=27;t.which===o&&this.go(n,"next"),t.which===i&&this.go(n,"prev"),t.which===r&&this.S("a.clearing-close").trigger("click").trigger("click.fndtn.clearing")},nav:function(t,n){var o=e("ul["+this.attr_name()+"]",".clearing-blackout");t.preventDefault(),this.go(o,n)},resize:function(){var t=e("img",".clearing-blackout .visible-img"),n=e(".clearing-touch-label",".clearing-blackout");t.length&&(this.center_and_label(t,n),t.trigger("resized.fndtn.clearing"))},fix_height:function(e){var t=e.parent().children(),n=this;return t.each(function(){var e=n.S(this),t=e.find("img");e.height()>t.outerHeight()&&e.addClass("fix-height")}).closest("ul").width(100*t.length+"%"),this},update_paddles:function(e){e=e.closest("li");var t=e.closest(".carousel").siblings(".visible-img");e.next().length>0?this.S(".clearing-main-next",t).removeClass("disabled"):this.S(".clearing-main-next",t).addClass("disabled"),e.prev().length>0?this.S(".clearing-main-prev",t).removeClass("disabled"):this.S(".clearing-main-prev",t).addClass("disabled")},center_and_label:function(e,t){return this.rtl?(e.css({marginRight:-(e.outerWidth()/2),marginTop:-(e.outerHeight()/2),left:"auto",right:"50%"}),t.length>0&&t.css({marginRight:-(t.outerWidth()/2),marginTop:-(e.outerHeight()/2)-t.outerHeight()-10,left:"auto",right:"50%"})):(e.css({marginLeft:-(e.outerWidth()/2),marginTop:-(e.outerHeight()/2)}),t.length>0&&t.css({marginLeft:-(t.outerWidth()/2),marginTop:-(e.outerHeight()/2)-t.outerHeight()-10})),this},load:function(e){var t;return t="A"===e[0].nodeName?e.attr("href"):e.parent().attr("href"),this.preload(e),t?t:e.attr("src")},preload:function(e){this.img(e.closest("li").next()).img(e.closest("li").prev())},img:function(e){if(e.length){var t=new Image,n=this.S("a",e);n.length?t.src=n.attr("href"):t.src=this.S("img",e).attr("src")}return this},caption:function(e,t){var n=t.attr("data-caption");return n?e.html(n).show():e.text("").hide(),this},go:function(e,t){var n=this.S(".visible",e),o=n[t]();this.settings.skip_selector&&0!=o.find(this.settings.skip_selector).length&&(o=o[t]()),o.length&&this.S("img",o).trigger("click",[n,o]).trigger("click.fndtn.clearing",[n,o]).trigger("change.fndtn.clearing")},shift:function(e,t,n){var o,i=t.parent(),r=this.settings.prev_index||t.index(),a=this.direction(i,e,t),s=this.rtl?"right":"left",c=parseInt(i.css("left"),10),u=t.outerWidth(),d={};t.index()===r||/skip/.test(a)?/skip/.test(a)&&(o=t.index()-this.settings.up_count,this.lock(),o>0?(d[s]=-(o*u),i.animate(d,300,this.unlock())):(d[s]=0,i.animate(d,300,this.unlock()))):/left/.test(a)?(this.lock(),d[s]=c+u,i.animate(d,300,this.unlock())):/right/.test(a)&&(this.lock(),d[s]=c-u,i.animate(d,300,this.unlock())),n()},direction:function(e,t,n){var o,i=this.S("li",e),r=i.outerWidth()+i.outerWidth()/4,a=Math.floor(this.S(".clearing-container").outerWidth()/r)-1,s=i.index(n);return this.settings.up_count=a,o=this.adjacent(this.settings.prev_index,s)?s>a&&s>this.settings.prev_index?"right":s>a-1&&s<=this.settings.prev_index?"left":!1:"skip",this.settings.prev_index=s,o},adjacent:function(e,t){for(var n=t+1;n>=t-1;n--)if(n===e)return!0;return!1},lock:function(){this.settings.locked=!0},unlock:function(){this.settings.locked=!1},locked:function(){return this.settings.locked},off:function(){this.S(this.scope).off(".fndtn.clearing"),this.S(t).off(".fndtn.clearing")},reflow:function(){this.init()}}}(jQuery,window,window.document);