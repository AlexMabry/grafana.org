describe("mq",function(){var e,t,n,i,r,o=window.matchMedia||function(){var e,t=document.documentElement,n=t.firstElementChild||t.firstChild,i=document.createElement("body"),r=document.createElement("div");return r.id="mq-test-1",r.style.cssText="position:absolute;top:-100em",i.style.background="none",i.appendChild(r),function(o){return r.innerHTML='&shy;<style media="'+o+'"> #mq-test-1 { width: 42px; }</style>',t.insertBefore(i,n),e=42===r.offsetWidth,t.removeChild(i),{matches:e,media:o}}}();before(function(t){(r=requirejs.config({context:Math.random().toString().slice(2),baseUrl:"../src",paths:{sinon:"../test/js/lib/sinon",cleanup:"../test/cleanup"}}))(["injectElementWithStyles","cleanup","sinon"],function(r,o,a){e=r,n=o,i=a,t()})}),window.matchMedia||window.msMatchMedia?describe("matchMedia version",function(){before(function(e){r(["mq"],function(n){t=n,e()})}),it("works",function(){expect(t("only screen")).to.equal(o("only screen").matches),expect(t("only fake rule")).to.equal(o("only fake rule").matches)})}):describe("fallback version",function(){before(function(n){e=i.spy(e),r.undef("injectElementWithStyles"),r.undef("mq"),define("injectElementWithStyles",[],function(){return e}),r(["mq"],function(e){t=e,n()})}),it("works",function(){expect(t("only screen")).to.equal(o("only screen").matches),expect(t("only fake rule")).to.equal(o("only fake rule").matches),expect(e.called).to.be(!0)})}),afterEach(function(){r.undef("mq")}),after(function(){n()})});