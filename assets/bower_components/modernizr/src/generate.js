define(["lodash"],function(t){return function(e){e||(e={}),e.options=e.options||[],e["feature-detects"]=e["feature-detects"]||[];var n=t.includes(e.options,"setClasses"),i='require(["ModernizrProto", "Modernizr", "testRunner"';return n&&(i+=', "setClasses", "classes"'),t.includes(e.options,"html5printshiv")&&(e.options=t.without(e.options,"html5shiv")),t.forEach(t.without(e.options,"setClasses"),function(t){i+=', "'+t+'"'}),t.forEach(e["feature-detects"],function(t){t=0===t.indexOf("test/")?t:"test/"+t,i+=', "'+t+'"'}),i+="], function( ModernizrProto, Modernizr, testRunner",n&&(i+=", setClasses, classes"),i+=") {\n  // Run each test\n  testRunner();\n\n",n&&(i+='  // Remove the "no-js" class if it exists\n  setClasses(classes);\n\n'),i+="  delete ModernizrProto.addTest;\n",i+="  delete ModernizrProto.addAsyncTest;\n\n",i+="  // Run the things that are supposed to run after the tests\n  for (var i = 0; i < Modernizr._q.length; i++) {\n    Modernizr._q[i]();\n  }\n\n",i+="  // Leak Modernizr namespace\n  window.Modernizr = Modernizr;\n\n});"}});