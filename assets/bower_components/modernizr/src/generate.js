define(["lodash"],function(A){return function(e){e||(e={}),e.options=e.options||[],e["feature-detects"]=e["feature-detects"]||[];var t=A.includes(e.options,"setClasses"),n='require(["ModernizrProto", "Modernizr", "testRunner"';return t&&(n+=', "setClasses", "classes"'),A.includes(e.options,"html5printshiv")&&(e.options=A.without(e.options,"html5shiv")),A.forEach(A.without(e.options,"setClasses"),function(A){n+=', "'+A+'"'}),A.forEach(e["feature-detects"],function(A){A=0===A.indexOf("test/")?A:"test/"+A,n+=', "'+A+'"'}),n+="], function( ModernizrProto, Modernizr, testRunner",t&&(n+=", setClasses, classes"),n+=") {\n  // Run each test\n  testRunner();\n\n",t&&(n+='  // Remove the "no-js" class if it exists\n  setClasses(classes);\n\n'),n+="  delete ModernizrProto.addTest;\n",n+="  delete ModernizrProto.addAsyncTest;\n\n",n+="  // Run the things that are supposed to run after the tests\n  for (var i = 0; i < Modernizr._q.length; i++) {\n    Modernizr._q[i]();\n  }\n\n",n+="  // Leak Modernizr namespace\n  window.Modernizr = Modernizr;\n\n});"}});