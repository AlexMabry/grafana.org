define(["lodash"],function(e){return function(t){t||(t={}),t.options=t.options||[],t["feature-detects"]=t["feature-detects"]||[];var n=e.includes(t.options,"setClasses"),r='require(["ModernizrProto", "Modernizr", "testRunner"';return n&&(r+=', "setClasses", "classes"'),e.includes(t.options,"html5printshiv")&&(t.options=e.without(t.options,"html5shiv")),e.forEach(e.without(t.options,"setClasses"),function(e){r+=', "'+e+'"'}),e.forEach(t["feature-detects"],function(e){e=0===e.indexOf("test/")?e:"test/"+e,r+=', "'+e+'"'}),r+="], function( ModernizrProto, Modernizr, testRunner",n&&(r+=", setClasses, classes"),r+=") {\n  // Run each test\n  testRunner();\n\n",n&&(r+='  // Remove the "no-js" class if it exists\n  setClasses(classes);\n\n'),r+="  delete ModernizrProto.addTest;\n",r+="  delete ModernizrProto.addAsyncTest;\n\n",r+="  // Run the things that are supposed to run after the tests\n  for (var i = 0; i < Modernizr._q.length; i++) {\n    Modernizr._q[i]();\n  }\n\n",r+="  // Leak Modernizr namespace\n  window.Modernizr = Modernizr;\n\n});"}});